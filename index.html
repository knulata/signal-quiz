<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Signal ğŸ’œ Kenali Pola Cintamu</title>
<meta name="description" content="Quiz 3 menit yang akan mengungkap pola cinta & kepribadian hubunganmu. 50,000+ orang sudah coba!">
<meta property="og:title" content="Signal ğŸ’œ Kenali Pola Cintamu">
<meta property="og:description" content="Quiz 3 menit yang akan mengungkap pola cinta & kepribadian hubunganmu">
<meta property="og:type" content="website">
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        brand: { 400: '#c084fc', 500: '#a855f7', 600: '#9333ea', 700: '#7e22ce', 800: '#6b21a8', 900: '#581c87' },
        pink: { 400: '#f472b6', 500: '#ec4899' }
      }
    }
  }
}
</script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
body { font-family: 'Inter', sans-serif; }
.fade-in { animation: fadeIn 0.5s ease-out; }
.slide-up { animation: slideUp 0.4s ease-out; }
.slide-in-right { animation: slideInRight 0.4s ease-out; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideInRight { from { opacity: 0; transform: translateX(40px); } to { opacity: 1; transform: translateX(0); } }
@keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px rgba(168,85,247,0.4); } 50% { box-shadow: 0 0 40px rgba(168,85,247,0.7); } }
.pulse-glow { animation: pulse-glow 2s infinite; }
.blur-content { filter: blur(6px); user-select: none; pointer-events: none; }
.progress-bar { transition: width 0.4s ease; }
.option-btn { transition: all 0.2s ease; }
.option-btn:hover { transform: translateY(-2px); }
.option-btn:active { transform: scale(0.97); }
.result-card-bg { background: linear-gradient(135deg, #1e1b4b 0%, #581c87 40%, #831843 100%); }
.hero-gradient { background: radial-gradient(ellipse at 50% 0%, rgba(168,85,247,0.15) 0%, transparent 70%); }
.floating { animation: float 3s ease-in-out infinite; }
@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
</style>
</head>
<body class="bg-gray-950 text-white min-h-screen">

<!-- LANDING -->
<section id="landing" class="min-h-screen flex flex-col items-center justify-center px-4 hero-gradient relative">
  <div class="absolute top-4 right-4">
    <button onclick="toggleLang()" class="text-sm bg-white/10 backdrop-blur px-3 py-1.5 rounded-full hover:bg-white/20 transition" id="langBtn">ğŸ‡¬ğŸ‡§ EN</button>
  </div>
  <div class="text-center max-w-md mx-auto slide-up">
    <div class="text-6xl mb-4 floating">ğŸ’œ</div>
    <h1 class="text-4xl font-black mb-2 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent" id="heroTitle">Kenali Pola Cintamu</h1>
    <p class="text-gray-400 mb-8 text-lg" id="heroSub">Quiz 3 menit yang akan mengungkap pola cinta & kepribadian hubunganmu</p>
    <button onclick="startQuiz()" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold text-lg px-8 py-4 rounded-2xl pulse-glow hover:scale-105 transition-transform" id="startBtn">
      Mulai Quiz â†’
    </button>
    <p class="text-gray-500 text-sm mt-6" id="socialProof">ğŸ”¥ 50,000+ orang sudah coba</p>
  </div>
</section>

<!-- SHARED RESULT (shown when visiting via share link) -->
<section id="sharedResult" class="hidden min-h-screen flex flex-col items-center justify-center px-4">
  <div class="max-w-md mx-auto text-center slide-up">
    <p class="text-gray-400 mb-4" id="sharedIntro">Temanmu mendapat hasil:</p>
    <div class="result-card-bg rounded-3xl p-8 mb-6">
      <div class="text-5xl mb-3" id="sharedEmoji"></div>
      <h2 class="text-2xl font-bold mb-2" id="sharedType"></h2>
      <p class="text-gray-300 text-sm" id="sharedDesc"></p>
    </div>
    <button onclick="startQuiz()" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold text-lg px-8 py-4 rounded-2xl pulse-glow hover:scale-105 transition-transform" id="sharedCta">
      Coba Quiz Juga! â†’
    </button>
  </div>
</section>

<!-- QUIZ -->
<section id="quiz" class="hidden min-h-screen flex flex-col px-4 py-8">
  <div class="max-w-md mx-auto w-full flex-1 flex flex-col">
    <!-- Progress -->
    <div class="mb-6">
      <div class="flex justify-between text-sm text-gray-400 mb-2">
        <span id="qNum">1/10</span>
        <span id="qPct">10%</span>
      </div>
      <div class="w-full bg-gray-800 rounded-full h-2">
        <div class="bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full progress-bar" id="progressBar" style="width:10%"></div>
      </div>
    </div>
    <!-- Question -->
    <div class="flex-1 flex flex-col justify-center">
      <h2 class="text-xl font-bold mb-6 slide-in-right" id="questionText"></h2>
      <div class="space-y-3" id="optionsContainer"></div>
    </div>
  </div>
</section>

<!-- RESULT -->
<section id="result" class="hidden px-4 py-8">
  <div class="max-w-md mx-auto">
    <!-- Result Card -->
    <div id="resultCard" class="result-card-bg rounded-3xl p-8 text-center mb-6 slide-up relative overflow-hidden">
      <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(circle at 20% 80%, rgba(236,72,153,0.3), transparent 50%), radial-gradient(circle at 80% 20%, rgba(168,85,247,0.3), transparent 50%);"></div>
      <div class="relative z-10">
        <p class="text-xs text-purple-300 uppercase tracking-widest mb-2">Signal ğŸ’œ Love Pattern</p>
        <div class="text-6xl mb-4" id="resultEmoji"></div>
        <h2 class="text-3xl font-black mb-3 bg-gradient-to-r from-purple-300 to-pink-300 bg-clip-text text-transparent" id="resultType"></h2>
        <p class="text-gray-300 leading-relaxed mb-6" id="resultDesc"></p>
        <div class="grid grid-cols-2 gap-3 text-sm">
          <div class="bg-white/10 rounded-xl p-3">
            <p class="text-green-400 font-semibold mb-1" id="compatLabel">ğŸ’š Cocok sama</p>
            <p class="text-white" id="compatMatch"></p>
          </div>
          <div class="bg-white/10 rounded-xl p-3">
            <p class="text-red-400 font-semibold mb-1" id="cautionLabel">âš ï¸ Hati-hati</p>
            <p class="text-white" id="compatCaution"></p>
          </div>
        </div>
        <p class="text-[10px] text-purple-400 mt-4">signal-quiz.vercel.app</p>
      </div>
    </div>

    <!-- Share -->
    <div class="bg-gray-900 rounded-2xl p-5 mb-6">
      <h3 class="font-bold mb-3 text-center" id="shareTitle">ğŸ“¤ Share Hasilmu!</h3>
      <div class="grid grid-cols-2 gap-2">
        <button onclick="shareWA()" class="bg-green-600 hover:bg-green-700 rounded-xl py-3 text-sm font-semibold transition">ğŸ’¬ WhatsApp</button>
        <button onclick="shareTwitter()" class="bg-blue-500 hover:bg-blue-600 rounded-xl py-3 text-sm font-semibold transition">ğŸ¦ Twitter</button>
        <button onclick="copyLink()" class="bg-gray-700 hover:bg-gray-600 rounded-xl py-3 text-sm font-semibold transition" id="copyBtn">ğŸ”— Copy Link</button>
        <button onclick="shareIG()" class="bg-gradient-to-r from-purple-600 to-pink-600 hover:opacity-90 rounded-xl py-3 text-sm font-semibold transition">ğŸ“¸ Screenshot</button>
      </div>
    </div>

    <!-- Referral -->
    <div class="bg-gradient-to-r from-purple-900/50 to-pink-900/50 border border-purple-700/50 rounded-2xl p-5 mb-6 text-center">
      <p class="font-bold mb-1" id="referralTitle">ğŸ Ajak 3 teman quiz â†’ unlock report GRATIS!</p>
      <p class="text-gray-400 text-sm" id="referralSub">Share linkmu & kumpulkan 3 referral</p>
      <div class="mt-3 bg-black/30 rounded-lg px-4 py-2 text-sm text-purple-300 font-mono break-all" id="referralLink"></div>
    </div>

    <!-- Premium: Full Report -->
    <div class="bg-gray-900 rounded-2xl p-6 mb-4 relative overflow-hidden border border-purple-500/30">
      <div class="flex items-center gap-2 mb-2">
        <span class="bg-purple-600 text-xs font-bold px-2 py-1 rounded-full">ğŸ”’ PREMIUM</span>
      </div>
      <h3 class="text-xl font-bold mb-2" id="premTitle1">Laporan Lengkap Pola Cintamu</h3>
      <p class="text-gray-400 text-sm mb-3" id="premDesc1">Hasil quiz kamu cuma permukaannya. Laporan lengkap ini mengungkap:</p>
      <ul class="text-sm text-gray-300 space-y-2 mb-4">
        <li>ğŸ’” <strong>Pola Attachment</strong> â€” Kenapa kamu selalu tertarik tipe yang sama? Apa yang membuatmu cemas atau menghindar?</li>
        <li>ğŸ—£ï¸ <strong>Gaya Komunikasi</strong> â€” Cara kamu berantem, minta maaf, dan mengekspresikan cinta</li>
        <li>ğŸ’• <strong>Love Language Detail</strong> â€” Bukan cuma tipe, tapi cara spesifik kamu memberi & menerima cinta</li>
        <li>ğŸš© <strong>Red & Green Flags</strong> â€” Apa yang harus kamu waspadai dan apa kelebihanmu dalam hubungan</li>
        <li>ğŸ’¡ <strong>Tips Personal</strong> â€” 5 saran spesifik untuk hubunganmu berdasarkan polamu</li>
      </ul>
      <div class="blur-content text-sm text-gray-300 space-y-2 mb-4">
        <p>Kamu memiliki gaya attachment yang cenderung secure dengan sedikit kecemasan. Ini berarti kamu mampu membentuk ikatan yang dalam namun kadang overthinking tentang perasaan pasangan. Pola ini biasanya terbentuk dari...</p>
        <p>Cara kamu berkomunikasi dalam konflik cenderung menghindari dulu, baru memproses. Ini bukan kelemahan, tapi pasanganmu perlu tahu bahwa kamu butuh waktu, bukan menolak mereka...</p>
      </div>
      <div class="flex items-center justify-between mb-3">
        <p class="text-2xl font-black text-purple-400">Rp 29.000</p>
        <p class="text-xs text-gray-500 line-through">Rp 79.000</p>
      </div>
      <button onclick="unlockReport('full')" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 font-bold py-3 rounded-xl hover:opacity-90 transition" id="unlockBtn1">ğŸ”“ Buka Laporan Lengkap</button>
      <p class="text-center text-xs text-gray-500 mt-2">4,823 orang sudah unlock minggu ini</p>
    </div>

    <!-- Premium: Ideal Match -->
    <div class="bg-gray-900 rounded-2xl p-6 mb-4 relative overflow-hidden border border-pink-500/30">
      <div class="flex items-center gap-2 mb-2">
        <span class="bg-pink-600 text-xs font-bold px-2 py-1 rounded-full">ğŸ”’ PREMIUM</span>
        <span class="bg-yellow-500 text-black text-xs font-bold px-2 py-1 rounded-full">â­ TERLARIS</span>
      </div>
      <h3 class="text-xl font-bold mb-2" id="premTitle2">Profil Pasangan Idealmu</h3>
      <p class="text-gray-400 text-sm mb-3" id="premDesc2">Pernah nanya "sebenernya aku cocoknya sama tipe yang gimana?" Ini jawabannya:</p>
      <ul class="text-sm text-gray-300 space-y-2 mb-4">
        <li>ğŸ‘¤ <strong>Tipe Kepribadian Ideal</strong> â€” Karakter spesifik yang bakal bikin kamu jatuh cinta & bertahan</li>
        <li>âš¡ <strong>Chemistry Match</strong> â€” Tipe mana yang bikin kamu "klik" vs yang cuma sementara</li>
        <li>âš ï¸ <strong>Tipe yang Harus Dihindari</strong> â€” Kenapa hubungan lamamu ga works, dan pola apa yang harus dihentikan</li>
        <li>ğŸ’¬ <strong>Conversation Starter</strong> â€” 3 pertanyaan untuk mengetahui apakah seseorang cocok untukmu</li>
      </ul>
      <div class="blur-content text-sm text-gray-300 space-y-2 mb-4">
        <p>Pasangan idealmu adalah seseorang yang hangat namun independen, mampu memberikan ruang personal sambil tetap hadir secara emosional. Mereka kemungkinan besar adalah tipe yang tenang namun penuh perhatian...</p>
      </div>
      <div class="flex items-center justify-between mb-3">
        <p class="text-2xl font-black text-pink-400">Rp 49.000</p>
        <p class="text-xs text-gray-500 line-through">Rp 129.000</p>
      </div>
      <button onclick="unlockReport('match')" class="w-full bg-gradient-to-r from-pink-600 to-purple-600 font-bold py-3 rounded-xl hover:opacity-90 transition" id="unlockBtn2">ğŸ”“ Buka Profil Match Idealmu</button>
      <p class="text-center text-xs text-gray-500 mt-2">Yang paling sering di-unlock! ğŸ”¥</p>
    </div>

    <!-- Payment Info -->
    <div class="bg-gray-900/50 rounded-2xl p-5 mb-6 text-center text-sm text-gray-400">
      <p class="font-semibold text-white mb-2" id="payTitle">ğŸ’³ Opsi Pembayaran</p>
      <p>GoPay: <span class="text-white font-mono">081311024455</span></p>
      <p>BCA: <span class="text-white font-mono">3722808999</span></p>
      <p class="mt-2 text-xs" id="payNote">Setelah transfer, klik tombol unlock untuk konfirmasi via WhatsApp</p>
    </div>

    <!-- Download Signal CTA -->
    <div class="bg-gradient-to-r from-purple-800 to-purple-900 rounded-2xl p-6 text-center mb-8">
      <p class="text-lg font-bold mb-2" id="ctaTitle">ğŸ’œ Mau ketemu match-mu?</p>
      <p class="text-gray-300 text-sm mb-4" id="ctaSub">Download Signal Dating â€” Dating app yang beneran ngerti kamu</p>
      <a href="https://signal.dating" target="_blank" class="inline-block bg-white text-purple-900 font-bold px-6 py-3 rounded-xl hover:bg-gray-100 transition" id="ctaBtn">Download Signal â†’</a>
    </div>
  </div>
</section>

<script>
// --- DATA ---
let lang = 'id';
let currentQ = 0;
let answers = [];
let resultType = null;
let quizId = '';

const types = {
  'deep-connector':    { emoji: 'ğŸ’œ', id: 'The Deep Connector',    en: 'The Deep Connector',    match: 'steady-anchor',      caution: 'free-spirit' },
  'passionate-explorer': { emoji: 'ğŸ”¥', id: 'The Passionate Explorer', en: 'The Passionate Explorer', match: 'romantic-dreamer',   caution: 'steady-anchor' },
  'steady-anchor':     { emoji: 'ğŸ›¡ï¸', id: 'The Steady Anchor',     en: 'The Steady Anchor',     match: 'deep-connector',     caution: 'passionate-explorer' },
  'free-spirit':       { emoji: 'ğŸŒŠ', id: 'The Free Spirit',       en: 'The Free Spirit',       match: 'passionate-explorer', caution: 'deep-connector' },
  'growth-partner':    { emoji: 'ğŸ’', id: 'The Growth Partner',    en: 'The Growth Partner',    match: 'growth-partner',     caution: 'free-spirit' },
  'romantic-dreamer':  { emoji: 'ğŸ­', id: 'The Romantic Dreamer',  en: 'The Romantic Dreamer',  match: 'passionate-explorer', caution: 'steady-anchor' }
};

const typeDescs = {
  'deep-connector':     { id: 'Kamu orang yang emosional mendalam, menghargai komunikasi & kepercayaan. Kamu butuh koneksi yang otentik dan bermakna dalam hubungan.', en: 'You\'re emotionally deep, valuing communication & trust. You need authentic, meaningful connections in relationships.' },
  'passionate-explorer':{ id: 'Kamu intens, petualang, dan driven by chemistry. Kamu hidup untuk momen-momen penuh gairah dan pengalaman baru bersama.', en: 'You\'re intense, adventurous, and chemistry-driven. You live for passionate moments and new experiences together.' },
  'steady-anchor':      { id: 'Kamu stabil, bisa diandalkan, dan menghargai keamanan. Kamu adalah fondasi kuat yang membuat hubungan bertahan lama.', en: 'You\'re stable, reliable, and value security. You\'re the strong foundation that makes relationships last.' },
  'free-spirit':        { id: 'Kamu mengalir dengan arus, independen, dan santai. Kamu percaya hubungan terbaik datang tanpa tekanan dan ekspektasi berlebihan.', en: 'You go with the flow, independent and chill. You believe the best relationships come without pressure or excessive expectations.' },
  'growth-partner':     { id: 'Kamu selalu ingin berkembang dan membangun bersama. Hubungan bagimu adalah partnership untuk saling mengangkat jadi versi terbaik.', en: 'You always want to grow and build together. Relationships for you are partnerships to elevate each other to your best versions.' },
  'romantic-dreamer':   { id: 'Kamu idealis, penuh cinta, dan suka gestur besar. Kamu percaya pada cinta sejati dan selalu memberi yang terbaik untuk pasangan.', en: 'You\'re idealistic, loving, and big on gestures. You believe in true love and always give your best for your partner.' }
};

const i18n = {
  heroTitle:     { id: 'Kenali Pola Cintamu', en: 'Discover Your Love Pattern' },
  heroSub:       { id: 'Quiz 3 menit yang akan mengungkap pola cinta & kepribadian hubunganmu', en: '3-minute quiz that reveals your relationship pattern using AI' },
  startBtn:      { id: 'Mulai Quiz â†’', en: 'Start Quiz â†’' },
  socialProof:   { id: 'ğŸ”¥ 50,000+ orang sudah coba', en: 'ğŸ”¥ 50,000+ people have tried it' },
  langBtn:       { id: 'ğŸ‡¬ğŸ‡§ EN', en: 'ğŸ‡®ğŸ‡© ID' },
  shareTitle:    { id: 'ğŸ“¤ Share Hasilmu!', en: 'ğŸ“¤ Share Your Result!' },
  compatLabel:   { id: 'ğŸ’š Cocok sama', en: 'ğŸ’š Best match' },
  cautionLabel:  { id: 'âš ï¸ Hati-hati', en: 'âš ï¸ Watch out' },
  referralTitle: { id: 'ğŸ Ajak 3 teman quiz â†’ unlock report GRATIS!', en: 'ğŸ Invite 3 friends â†’ unlock report FREE!' },
  referralSub:   { id: 'Share linkmu & kumpulkan 3 referral', en: 'Share your link & collect 3 referrals' },
  copyBtn:       { id: 'ğŸ”— Copy Link', en: 'ğŸ”— Copy Link' },
  sharedIntro:   { id: 'Temanmu mendapat hasil:', en: 'Your friend got:' },
  sharedCta:     { id: 'Coba Quiz Juga! â†’', en: 'Take the Quiz Too! â†’' },
  payTitle:      { id: 'ğŸ’³ Opsi Pembayaran', en: 'ğŸ’³ Payment Options' },
  payNote:       { id: 'Setelah transfer, klik tombol unlock untuk konfirmasi via WhatsApp', en: 'After transfer, click unlock to confirm via WhatsApp' },
  ctaTitle:      { id: 'ğŸ’œ Mau ketemu match-mu?', en: 'ğŸ’œ Want to meet your match?' },
  ctaSub:        { id: 'Download Signal Dating â€” Dating app yang beneran ngerti kamu', en: 'Download Signal Dating â€” AI-powered dating app that truly gets you' },
  ctaBtn:        { id: 'Download Signal â†’', en: 'Download Signal â†’' },
  unlockBtn1:    { id: 'ğŸ”“ Buka Laporan Lengkap', en: 'ğŸ”“ Unlock Full Report' },
  unlockBtn2:    { id: 'ğŸ”“ Buka Profil Match Idealmu', en: 'ğŸ”“ Unlock Your Ideal Match Profile' },
};

const questions = [
  {
    id: 'Pasanganmu lupa hari jadian kalian...',
    en: 'Your partner forgot your anniversary...',
    options: [
      { id: 'ğŸ˜¶ Sakit hati tapi disimpan', en: 'ğŸ˜¶ Hurt but keep it inside', scores: { anxious: 2, reserved: 2 } },
      { id: 'ğŸ˜¤ Langsung bilang', en: 'ğŸ˜¤ Tell them right away', scores: { open: 2, passionate: 1 } },
      { id: 'ğŸ¤· Santai aja', en: 'ğŸ¤· No big deal', scores: { avoidant: 1, free: 2 } },
      { id: 'ğŸ’¬ Ajak ngobrol baik-baik', en: 'ğŸ’¬ Talk it out nicely', scores: { secure: 2, open: 1, deep: 1 } }
    ]
  },
  {
    id: 'Kamu lihat pasangan lagi chat sama mantannya...',
    en: 'You see your partner texting their ex...',
    options: [
      { id: 'ğŸ¤¨ Langsung curiga', en: 'ğŸ¤¨ Immediately suspicious', scores: { anxious: 2, passionate: 1 } },
      { id: 'ğŸ§˜ Penasaran tapi tahan', en: 'ğŸ§˜ Curious but restrained', scores: { secure: 1, reserved: 1 } },
      { id: 'ğŸ˜Œ Santai', en: 'ğŸ˜Œ Chill about it', scores: { avoidant: 1, free: 2 } },
      { id: 'ğŸ—£ï¸ Tanya langsung', en: 'ğŸ—£ï¸ Ask directly', scores: { open: 2, secure: 1, deep: 1 } }
    ]
  },
  {
    id: 'Mana yang PALING penting dalam hubungan?',
    en: 'What matters MOST in a relationship?',
    options: [
      { id: 'ğŸ¤ Kepercayaan', en: 'ğŸ¤ Trust', scores: { secure: 2, deep: 2, stability: 1 } },
      { id: 'âš¡ Chemistry', en: 'âš¡ Chemistry', scores: { passionate: 2, adventure: 1 } },
      { id: 'âš–ï¸ Kestabilan', en: 'âš–ï¸ Stability', scores: { stability: 2, steady: 2 } },
      { id: 'ğŸŒ± Berkembang bareng', en: 'ğŸŒ± Growing together', scores: { growth: 3 } }
    ]
  },
  {
    id: 'Weekend ideal sama pasangan?',
    en: 'Ideal weekend with your partner?',
    options: [
      { id: 'ğŸ  Di rumah nonton', en: 'ğŸ  Stay home & watch movies', scores: { stability: 1, steady: 1, time: 1 } },
      { id: 'ğŸ‰ Keluar seru-seruan', en: 'ğŸ‰ Go out & have fun', scores: { adventure: 2, passionate: 1 } },
      { id: 'ğŸ—£ï¸ Deep talk di cafe', en: 'ğŸ—£ï¸ Deep talk at a cafe', scores: { deep: 2, words: 1, open: 1 } },
      { id: 'ğŸ¯ Coba hal baru', en: 'ğŸ¯ Try something new', scores: { growth: 2, adventure: 1 } }
    ]
  },
  {
    id: 'Cara kamu nunjukin sayang?',
    en: 'How do you show love?',
    options: [
      { id: 'ğŸ Kasih hadiah/surprise', en: 'ğŸ Gifts & surprises', scores: { gifts: 2, romantic: 2 } },
      { id: 'ğŸ¤— Pelukan & quality time', en: 'ğŸ¤— Hugs & quality time', scores: { touch: 1, time: 2, deep: 1 } },
      { id: 'ğŸ’¬ Kata-kata manis', en: 'ğŸ’¬ Sweet words', scores: { words: 2, romantic: 1, open: 1 } },
      { id: 'ğŸ”§ Bantuin urusan dia', en: 'ğŸ”§ Help with their stuff', scores: { acts: 2, steady: 1, growth: 1 } }
    ]
  },
  {
    id: 'Kalau berantem, kamu biasanya...',
    en: 'When you fight, you usually...',
    options: [
      { id: 'ğŸš¶ Butuh waktu sendiri dulu', en: 'ğŸš¶ Need alone time first', scores: { avoidant: 2, reserved: 2 } },
      { id: 'ğŸ—£ï¸ Mau selesaiin sekarang', en: 'ğŸ—£ï¸ Want to resolve it now', scores: { open: 2, passionate: 1 } },
      { id: 'ğŸ˜¢ Nangis/emosional', en: 'ğŸ˜¢ Cry / get emotional', scores: { anxious: 2, romantic: 1 } },
      { id: 'ğŸ¤” Analisa masalahnya', en: 'ğŸ¤” Analyze the problem', scores: { secure: 1, growth: 2 } }
    ]
  },
  {
    id: 'Yang bikin kamu tertarik pertama kali?',
    en: 'What attracts you first?',
    options: [
      { id: 'ğŸ˜‚ Sense of humor', en: 'ğŸ˜‚ Sense of humor', scores: { free: 1, passionate: 1 } },
      { id: 'ğŸ§  Kecerdasan', en: 'ğŸ§  Intelligence', scores: { growth: 2, deep: 1 } },
      { id: 'ğŸ’ª Penampilan', en: 'ğŸ’ª Looks', scores: { passionate: 2 } },
      { id: 'â¤ï¸ Kebaikan hati', en: 'â¤ï¸ Kindness', scores: { secure: 1, romantic: 2, deep: 1 } }
    ]
  },
  {
    id: 'Kamu lebih suka hubungan yang...',
    en: 'You prefer relationships that are...',
    options: [
      { id: 'ğŸ”¥ Penuh passion & drama', en: 'ğŸ”¥ Full of passion & drama', scores: { passionate: 3, adventure: 1 } },
      { id: 'â˜€ï¸ Tenang & stabil', en: 'â˜€ï¸ Calm & stable', scores: { steady: 3, stability: 2 } },
      { id: 'ğŸŒŠ Mengalir aja', en: 'ğŸŒŠ Just go with the flow', scores: { free: 3 } },
      { id: 'ğŸš€ Selalu berkembang', en: 'ğŸš€ Always growing', scores: { growth: 3 } }
    ]
  },
  {
    id: 'Red flag terbesar menurutmu?',
    en: 'Biggest red flag for you?',
    options: [
      { id: 'ğŸ¤¥ Bohong kecil', en: 'ğŸ¤¥ Small lies', scores: { deep: 2, secure: 1 } },
      { id: 'ğŸ“± Sering main HP', en: 'ğŸ“± Always on their phone', scores: { romantic: 1, time: 1, anxious: 1 } },
      { id: 'ğŸ˜¶ Ga mau komunikasi', en: 'ğŸ˜¶ Won\'t communicate', scores: { open: 2, deep: 1 } },
      { id: 'ğŸ‘€ Masih stalk mantan', en: 'ğŸ‘€ Still stalking their ex', scores: { passionate: 1, anxious: 1 } }
    ]
  },
  {
    id: 'Dalam 5 tahun, kamu pengen...',
    en: 'In 5 years, you want to...',
    options: [
      { id: 'ğŸ’ Menikah & settle down', en: 'ğŸ’ Get married & settle down', scores: { stability: 3, steady: 2, romantic: 1 } },
      { id: 'âœˆï¸ Explore dunia bareng', en: 'âœˆï¸ Explore the world together', scores: { adventure: 3, passionate: 1, free: 1 } },
      { id: 'ğŸ’¼ Sukses karir bareng', en: 'ğŸ’¼ Build careers together', scores: { growth: 3 } },
      { id: 'ğŸ  Hidup sederhana bahagia', en: 'ğŸ  Simple happy life', scores: { steady: 2, free: 1, stability: 1 } }
    ]
  }
];

// --- SCORING ---
function calcType() {
  const s = { deep: 0, passionate: 0, steady: 0, free: 0, growth: 0, romantic: 0, secure: 0, anxious: 0, avoidant: 0, open: 0, reserved: 0, adventure: 0, stability: 0, gifts: 0, touch: 0, words: 0, acts: 0, time: 0 };
  answers.forEach(a => { Object.entries(a.scores).forEach(([k,v]) => { s[k] = (s[k]||0) + v; }); });
  // bonus mapping
  s.deep += s.secure + s.open;
  s.passionate += s.anxious + s.adventure;
  s.steady += s.stability + s.reserved;
  s.free += s.avoidant;
  s.growth += 0;
  s.romantic += s.gifts + s.words;

  const typeScores = { 'deep-connector': s.deep, 'passionate-explorer': s.passionate, 'steady-anchor': s.steady, 'free-spirit': s.free, 'growth-partner': s.growth, 'romantic-dreamer': s.romantic };
  return Object.entries(typeScores).sort((a,b) => b[1] - a[1])[0][0];
}

// --- UI ---
function show(id) { document.querySelectorAll('body > section').forEach(s => s.classList.add('hidden')); document.getElementById(id).classList.remove('hidden'); }

function toggleLang() {
  lang = lang === 'id' ? 'en' : 'id';
  Object.entries(i18n).forEach(([id, t]) => { const el = document.getElementById(id); if (el) el.textContent = t[lang]; });
  document.getElementById('langBtn').textContent = lang === 'id' ? 'ğŸ‡¬ğŸ‡§ EN' : 'ğŸ‡®ğŸ‡© ID';
}

function startQuiz() { currentQ = 0; answers = []; show('quiz'); renderQ(); }

function renderQ() {
  const q = questions[currentQ];
  document.getElementById('questionText').textContent = q[lang];
  document.getElementById('questionText').className = 'text-xl font-bold mb-6 slide-in-right';
  document.getElementById('qNum').textContent = `${currentQ+1}/10`;
  const pct = ((currentQ+1)*10);
  document.getElementById('qPct').textContent = pct+'%';
  document.getElementById('progressBar').style.width = pct+'%';
  const c = document.getElementById('optionsContainer');
  c.innerHTML = '';
  q.options.forEach((o, i) => {
    const btn = document.createElement('button');
    btn.className = 'option-btn w-full text-left bg-gray-800/80 hover:bg-purple-900/50 border border-gray-700 hover:border-purple-500 rounded-2xl px-5 py-4 text-base transition';
    btn.textContent = o[lang];
    btn.style.animationDelay = (i*0.07)+'s';
    btn.onclick = () => selectOption(o);
    c.appendChild(btn);
  });
}

function selectOption(o) {
  answers.push(o);
  currentQ++;
  if (currentQ >= 10) { showResult(); } else { renderQ(); }
}

function genId() { return Math.random().toString(36).substr(2,8).toUpperCase(); }

function showResult() {
  resultType = calcType();
  quizId = genId();
  const t = types[resultType];
  document.getElementById('resultEmoji').textContent = t.emoji;
  document.getElementById('resultType').textContent = t[lang] || t.en;
  document.getElementById('resultDesc').textContent = typeDescs[resultType][lang];
  const matchT = types[t.match];
  const cautionT = types[t.caution];
  document.getElementById('compatMatch').textContent = matchT.emoji + ' ' + (matchT[lang] || matchT.en);
  document.getElementById('compatCaution').textContent = cautionT.emoji + ' ' + (cautionT[lang] || cautionT.en);
  const shareUrl = `${location.origin}${location.pathname}?type=${resultType}&ref=${quizId}`;
  document.getElementById('referralLink').textContent = shareUrl;
  show('result');
  window.scrollTo(0, 0);
}

function getShareUrl() { return `${location.origin}${location.pathname}?type=${resultType}&ref=${quizId}`; }
function getShareText() {
  const t = types[resultType];
  return lang === 'id'
    ? `${t.emoji} Tipe cintaku: ${t.id}! Coba quiz Signal dan temukan pola cintamu ğŸ’œ`
    : `${t.emoji} My love type: ${t.en}! Try Signal's quiz and discover your love pattern ğŸ’œ`;
}

function shareWA() { window.open(`https://wa.me/?text=${encodeURIComponent(getShareText()+'\n'+getShareUrl())}`, '_blank'); }
function shareTwitter() { window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(getShareText())}&url=${encodeURIComponent(getShareUrl())}`, '_blank'); }
function copyLink() {
  navigator.clipboard.writeText(getShareUrl()).then(() => {
    const b = document.getElementById('copyBtn');
    b.textContent = 'âœ… Copied!';
    setTimeout(() => { b.textContent = i18n.copyBtn[lang]; }, 2000);
  });
}
function shareIG() { alert(lang === 'id' ? 'ğŸ“¸ Screenshot kartu hasilmu di atas dan share ke IG Story!' : 'ğŸ“¸ Screenshot your result card above and share to IG Story!'); }

function unlockReport(type) {
  const t = types[resultType];
  const name = t[lang] || t.en;
  if (type === 'full') {
    window.open(`https://wa.me/6281311024455?text=${encodeURIComponent(`Halo Signal! Saya mau unlock Full AFP Report (Rp 29k). Quiz ID: ${quizId}. Tipe saya: ${name}`)}`, '_blank');
  } else {
    window.open(`https://wa.me/6281311024455?text=${encodeURIComponent(`Halo Signal! Saya mau unlock Ideal Match Report (Rp 49k). Quiz ID: ${quizId}. Tipe saya: ${name}`)}`, '_blank');
  }
}

// --- INIT: check share link ---
(function init() {
  const params = new URLSearchParams(location.search);
  const sharedType = params.get('type');
  if (sharedType && types[sharedType]) {
    const t = types[sharedType];
    document.getElementById('sharedEmoji').textContent = t.emoji;
    document.getElementById('sharedType').textContent = t[lang] || t.en;
    document.getElementById('sharedDesc').textContent = typeDescs[sharedType][lang];
    show('sharedResult');
    document.getElementById('landing').classList.add('hidden');
  }
})();
</script>
</body>
</html>
